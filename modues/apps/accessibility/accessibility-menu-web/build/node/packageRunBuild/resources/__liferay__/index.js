var P=Object.defineProperty;var Q=Object.getOwnPropertyDescriptor;var W=Object.getOwnPropertyNames;var X=Object.prototype.hasOwnProperty;var m=(i,t)=>{for(var s in t)P(i,s,{get:t[s],enumerable:!0})},Y=(i,t,s,c)=>{if(t&&typeof t=="object"||typeof t=="function")for(let u of W(t))!X.call(i,u)&&u!==s&&P(i,u,{get:()=>t[u],enumerable:!(c=Q(t,u))||c.enumerable});return i},e=(i,t,s)=>(Y(i,t,"default"),s&&Y(s,t,"default"));var d={};m(d,{default:()=>k});e(d,pe);import*as pe from"../../frontend-taglib-clay/__liferay__/exports/@clayui$alert.js";import Z from"../../frontend-taglib-clay/__liferay__/exports/@clayui$alert.js";var k=Z;var g={};m(g,{default:()=>h});e(g,ye);import*as ye from"../../frontend-taglib-clay/__liferay__/exports/@clayui$button.js";import R from"../../frontend-taglib-clay/__liferay__/exports/@clayui$button.js";var h=R;var f={};m(f,{default:()=>N});e(f,de);import*as de from"../../frontend-taglib-clay/__liferay__/exports/@clayui$modal.js";import ee from"../../frontend-taglib-clay/__liferay__/exports/@clayui$modal.js";var N=ee;var b={};e(b,ge);import*as ge from"../../accessibility-settings-state-web/__liferay__/index.js";var C={};e(C,be);import*as be from"../../cookies-banner-web/__liferay__/index.js";var S={};e(S,Ce);import*as Ce from"../../frontend-js-state-web/__liferay__/react.js";var n={};e(n,Se);import*as Se from"../../frontend-js-web/__liferay__/index.js";var _={};m(_,{default:()=>p});e(_,Ae);import*as Ae from"../../frontend-js-react-web/__liferay__/exports/prop-types.js";import te from"../../frontend-js-react-web/__liferay__/exports/prop-types.js";var p=te;var l={};m(l,{default:()=>r});e(l,xe);import*as xe from"../../frontend-js-react-web/__liferay__/exports/react.js";import oe from"../../frontend-js-react-web/__liferay__/exports/react.js";var r=oe;var y={};m(y,{default:()=>x});e(y,Te);import*as Te from"../../frontend-taglib-clay/__liferay__/exports/@clayui$form.js";import ie from"../../frontend-taglib-clay/__liferay__/exports/@clayui$form.js";var x=ie;await import(`@liferay/language/${Liferay.ThemeDisplay.getLanguageId()}/accessibility-menu-web/all.js`);var ae="Enter",re=({description:i,disabled:t,index:s,label:c,onChange:u,value:E})=>{let A=`accessibilityHelp${s}`;return r.createElement("li",null,r.createElement(x.Group,null,r.createElement(y.ClayToggle,{"aria-describedby":A,disabled:t,label:c,onKeyDown:M=>{!t&&M.key===ae&&u(!E)},onToggle:u,toggled:E}),r.createElement(x.FeedbackGroup,null,r.createElement(x.Text,{id:A},i))))},D=re;await import(`@liferay/language/${Liferay.ThemeDisplay.getLanguageId()}/accessibility-menu-web/all.js`);function B(i,t,s){if(window.themeDisplay.isSignedIn()&&!K(t))return t;{let c=n.localStorage.getItem(s,n.localStorage.TYPES.FUNCTIONAL);if(!K(c))return c==="true"}return i}function K(i){return i==null}function F(i,t){window.document.querySelector("body").classList.toggle(i,t)}await import(`@liferay/language/${Liferay.ThemeDisplay.getLanguageId()}/accessibility-menu-web/all.js`);var G="beforeNavigate",v="openAccessibilityMenu",U=i=>{let[t,s]=(0,S.useLiferayState)(b.accessibilityMenuAtom),[c,u]=(0,l.useState)((0,n.checkConsent)(n.COOKIE_TYPES.FUNCTIONAL)),{observer:E,onOpenChange:A,open:M}=(0,f.useModal)();(0,l.useEffect)(()=>{s(i.settings.reduce((o,a)=>{let{className:L,defaultValue:H,description:q,key:w,label:z,sessionClicksValue:J}=a,V=B(H,J,w);return F(L,V),o[w]={className:L,description:q,key:w,label:z,value:V},o},{}))},[s,i.settings]),(0,l.useEffect)(()=>{let o=()=>A(!0);Liferay.on(v,o);let a=()=>{Liferay.detach(v,o)};return Liferay.once(G,a),()=>{a(),Liferay.detach(G,a)}},[A]);let T=(0,l.useCallback)((o,a)=>s({...t,[o]:{...t[o],...a}}),[t,s]),I=(0,l.useCallback)((o,a)=>{F(a.className,o),T(a.key,{updating:!1,value:o})},[T]),$=(0,l.useCallback)((o,a)=>{if(!a.updating){if(T(a.key,{updating:!0}),window.themeDisplay.isSignedIn())return(0,n.setSessionValue)(a.key,o).then(()=>{I(o,a)});n.localStorage.setItem(a.key,o,n.localStorage.TYPES.FUNCTIONAL),I(o,a)}},[I,T]),j=(0,l.useCallback)(()=>{(0,C.checkCookieConsentForTypes)(n.COOKIE_TYPES.FUNCTIONAL).then(()=>{u(!0)}).catch(()=>{u(!1)})},[]),O=!c&&!window.themeDisplay.isSignedIn();return r.createElement(r.Fragment,null,M&&r.createElement(N,{observer:E},r.createElement(N.Header,null,Liferay.Language.get("accessibility-menu")),r.createElement(N.Body,null,O&&r.createElement(k,{className:"mb-4",displayType:"info",title:`${Liferay.Language.get("info")}:`},Liferay.Language.get("accessibility-menu-cookies-alert"),r.createElement(k.Footer,null,r.createElement(h.Group,null,r.createElement(h,{alert:!0,onClick:j},Liferay.Language.get("review-cookies"))))),r.createElement("ul",{className:"list-unstyled mb-0"},Object.keys(t).map((o,a)=>r.createElement(D,{description:t[o].description,disabled:O,index:a,key:t[o].key,label:t[o].label,onChange:L=>$(L,t[o]),value:t[o].value}))))))};U.propTypes={settings:p.arrayOf(p.shape({className:p.string,defaultValue:p.bool,key:p.string,label:p.string,sessionClicksValue:p.bool})).isRequired};var ne=U;var le=()=>{Liferay.fire("openAccessibilityMenu")},se=le;export{ne as AccessibilityMenu,se as accessibilityMenuOpener};
//# sourceMappingURL=index.js.map
